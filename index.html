<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
  <title>FitTrack Pro - Ù†Ø¸Ø§Ù… Ø¯Ù‚Ø© Ø¹Ø§Ù„ÙŠØ©</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary: #4361ee;
      --success: #10b981;
      --danger: #ef4444;
      --light: #f8f9fa;
      --dark: #212529;
      --bg: #f0f4f8;
      --card: #ffffff;
    }
    [data-theme="dark"] {
      --bg: #0f172a;
      --card: #1e293b;
      --light: #0f172a;
      --dark: #f1f5f9;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, sans-serif; }
    body {
      background-color: var(--bg);
      color: var(--dark);
      direction: rtl;
      transition: background-color 0.3s, color 0.3s;
    }
    .top-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--card);
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 0 15px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      z-index: 1000;
    }
    .nav-icons {
      display: flex;
      gap: 28px;
    }
    .nav-icon {
      font-size: 1.4rem;
      color: #94a3b8;
      cursor: pointer;
      transition: color 0.2s;
    }
    .nav-icon.active, .nav-icon:hover {
      color: var(--primary);
    }
    .logo-icon {
      font-size: 1.8rem;
      color: var(--primary);
    }
    #appSection {
      padding-top: 70px;
      padding-bottom: 20px;
    }
    .container { max-width: 480px; margin: 0 auto; padding: 0 15px; }
    .section {
      background: var(--card);
      padding: 22px;
      border-radius: 18px;
      margin-bottom: 22px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
    }
    .hidden { display: none; }
    h2 {
      font-size: 22px;
      margin-bottom: 20px;
      color: var(--primary);
      text-align: center;
    }
    .metric {
      font-size: 26px;
      font-weight: bold;
      margin: 10px 0;
      color: var(--primary);
    }
    .label {
      color: #64748b;
      font-size: 15px;
      margin-bottom: 4px;
      display: block;
    }
    .coord {
      font-family: monospace;
      background: #f1f8ff;
      padding: 10px;
      border-radius: 10px;
      margin: 10px 0;
      direction: ltr;
      text-align: center;
      font-size: 15px;
      border: 1px solid #dbeafe;
    }
    .gps-status {
      padding: 10px;
      border-radius: 10px;
      margin: 12px 0;
      text-align: center;
      background: #f0f9ff;
      color: #0c4a6e;
      font-weight: bold;
    }
    [data-theme="dark"] .gps-status {
      background: #1e293b;
      color: #94a3b8;
    }
    .btn {
      width: 100%;
      padding: 14px;
      font-size: 18px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 10px;
    }
    .btn-start { background: var(--success); color: white; }
    .btn-stop { background: var(--danger); color: white; }
    .btn:disabled { opacity: 0.6; }
    input, select {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 1px solid #cbd5e1;
      border-radius: 10px;
      background: var(--card);
      color: var(--dark);
    }
    #preAuthSection {
      max-width: 400px;
      margin: 60px auto;
      padding: 30px;
      background: var(--card);
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      text-align: center;
    }
    .app-logo { font-size: 3.5rem; color: var(--primary); margin-bottom: 20px; }
    .app-title { font-size: 1.8rem; font-weight: 800; color: var(--primary); margin-bottom: 25px; }
    .auth-buttons { display: flex; gap: 12px; margin-top: 10px; }
    .auth-btn {
      flex: 1;
      padding: 12px;
      border: none;
      border-radius: 12px;
      font-weight: bold;
      cursor: pointer;
      font-size: 1rem;
    }
    .signup-btn { background: var(--primary); color: white; }
    .login-btn { background: #6c757d; color: white; }
    @media (max-width: 600px) {
      .auth-buttons { flex-direction: column; }
      .nav-icons { gap: 20px; }
    }
  </style>
</head>
<body>
  <!-- Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <div id="preAuthSection">
    <div class="app-logo"><i class="fas fa-dumbbell"></i></div>
    <h1 class="app-title">FitTrack Pro</h1>
    <div class="input-group">
      <input type="text" id="usernameInput" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
      <input type="password" id="passwordInput" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
    </div>
    <div class="auth-buttons">
      <button class="auth-btn signup-btn" onclick="handleAuth(true)">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
      <button class="auth-btn login-btn" onclick="handleAuth(false)">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
    </div>
  </div>

  <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
  <nav id="topNav" class="top-nav hidden">
    <div class="nav-icons">
      <i class="nav-icon fas fa-home active" data-tab="dashboard"></i>
      <i class="nav-icon fas fa-running" data-tab="workouts"></i>
      <i class="nav-icon fas fa-utensils" data-tab="nutrition"></i>
      <i class="nav-icon fas fa-user" data-tab="profile"></i>
    </div>
    <div class="logo-icon"><i class="fas fa-dumbbell"></i></div>
  </nav>

  <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
  <div id="appSection" class="hidden">
    <div class="container">
      <!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
      <div id="dashboardTab" class="tab-content">
        <div class="section">
          <h2>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
          <div class="label">Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ÙŠÙˆÙ…</div>
          <div class="metric" id="dashSteps">0</div>
          <div class="label">Ø§Ù„Ù…Ø³Ø§ÙØ©</div>
          <div class="metric" id="dashDistance">0.00 Ù…</div>
          <button class="btn" style="background:#64748b;" onclick="alert('Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±')">Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ù„ÙŠÙ„Ø§Øª</button>
        </div>
      </div>

      <!-- ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† (Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¬ÙŠÙ† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨) -->
      <div id="workoutsTab" class="tab-content hidden">
        <div class="section">
          <h2>Ù†Ø¸Ø§Ù… Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„Ù‡Ø¬ÙŠÙ†</h2>
          
          <div class="label">Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ù‚Ø·ÙˆØ¹Ø©</div>
          <div class="metric" id="distance">0.00 Ù…</div>

          <div class="label">Ø¹Ø¯Ø¯ Ø§Ù„Ø®Ø·ÙˆØ§Øª</div>
          <div class="metric" id="steps">0</div>

          <div class="label">ÙˆØ¶Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…</div>
          <div id="mode" class="gps-status">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø¯Ø¡</div>

          <div class="label">Ø®Ø· Ø§Ù„Ø¹Ø±Ø¶</div>
          <div class="coord" id="lat">â€”</div>

          <div class="label">Ø®Ø· Ø§Ù„Ø·ÙˆÙ„</div>
          <div class="coord" id="lng">â€”</div>

          <div id="status" class="gps-status">Ø§Ø¶ØºØ· "Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØªØ¨Ø¹" Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¬ÙŠÙ†</div>

          <button id="startBtn" class="btn btn-start">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØªØ¨Ø¹</button>
          <button id="stopBtn" class="btn btn-stop" disabled>Ø¥ÙŠÙ‚Ø§Ù</button>
        </div>
      </div>

      <!-- Ø§Ù„ØªØºØ°ÙŠØ© -->
      <div id="nutritionTab" class="tab-content hidden">
        <div class="section">
          <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</h2>
          <select id="mealType">
            <option value="breakfast">ÙØ·ÙˆØ±</option>
            <option value="lunch">ØºØ¯Ø§Ø¡</option>
            <option value="dinner">Ø¹Ø´Ø§Ø¡</option>
            <option value="snack">ÙˆØ¬Ø¨Ø© Ø®ÙÙŠÙØ©</option>
          </select>
          <input type="text" id="foodItem" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø¹Ø§Ù…" />
          <input type="number" id="caloriesInput" placeholder="Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ø­Ø±Ø§Ø±ÙŠØ©" min="0" />
          <button class="btn" onclick="saveNutrition()">Ø­ÙØ¸ Ø§Ù„ÙˆØ¬Ø¨Ø©</button>
          <div id="nutritionList" style="margin-top:20px;"></div>
        </div>
      </div>

      <!-- Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ -->
      <div id="profileTab" class="tab-content hidden">
        <div class="section">
          <h2>Ù…Ù„ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</h2>
          <div class="label">Ø§Ù„Ø§Ø³Ù…</div>
          <div id="userInfo">â€”</div>
          <button class="btn" style="background:#64748b;" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- Firebase ---
    const firebaseConfig = {
      apiKey: "AIzaSyC1ps0XFVjJJ1YAi2H0XEtjAc-wslWrNjo",
      authDomain: "ddccdc-c6a58.firebaseapp.com",
      projectId: "ddccdc-c6a58",
      storageBucket: "ddccdc-c6a58.firebasestorage.app",
      messagingSenderId: "339966933373",
      appId: "1:339966933373:web:b638ece3460e6c7a7c7414"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    let currentUser = null;

    // --- Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ---
    document.querySelectorAll('.nav-icon').forEach(icon => {
      icon.addEventListener('click', () => {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.add('hidden'));
        document.querySelectorAll('.nav-icon').forEach(i => i.classList.remove('active'));
        const tab = icon.getAttribute('data-tab');
        document.getElementById(tab + 'Tab').classList.remove('hidden');
        icon.classList.add('active');
        if (tab === 'dashboard' && currentUser) loadDashboard();
        if (tab === 'nutrition' && currentUser) loadNutritionList();
        if (tab === 'profile' && currentUser) loadProfile();
      });
    });

    // --- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
    function handleAuth(isSignup) {
      const username = document.getElementById('usernameInput').value.trim();
      const password = document.getElementById('passwordInput').value;
      if (!username || password.length < 6) return alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù‚ØµÙŠØ±Ø© (6 Ø£Ø­Ø±Ù ÙƒØ­Ø¯ Ø£Ø¯Ù†Ù‰)');
      const email = `${username}@example.com`;
      (isSignup ? auth.createUserWithEmailAndPassword(email, password) : auth.signInWithEmailAndPassword(email, password))
        .then(async (userCredential) => {
          if (isSignup) {
            await userCredential.user.updateProfile({ displayName: username });
            await db.collection('users').doc(userCredential.user.uid).set({ username });
          }
          currentUser = userCredential.user;
          document.getElementById('preAuthSection').classList.add('hidden');
          document.getElementById('topNav').classList.remove('hidden');
          document.getElementById('appSection').classList.remove('hidden');
          loadProfile();
          document.querySelector('.nav-icon[data-tab="dashboard"]').click();
        })
        .catch(err => alert('Ø®Ø·Ø£: ' + err.message));
    }

    function logout() {
      auth.signOut().then(() => {
        currentUser = null;
        document.getElementById('preAuthSection').classList.remove('hidden');
        document.getElementById('topNav').classList.add('hidden');
        document.getElementById('appSection').classList.add('hidden');
      });
    }

    // --- Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‡Ø¬ÙŠÙ† Ù„Ù„ØªÙ…Ø§Ø±ÙŠÙ† ---
    let isTracking = false;
    let totalDistance = 0;
    let stepCount = 0;
    let lastGpsPosition = null;
    let lastGpsTime = 0;
    let lastAccel = 0;
    let lastStepTime = 0;
    let isGpsAvailable = false;
    let gpsTimeout = 0;

    const STEP_THRESHOLD = 1.7;
    const MIN_STEP_INTERVAL = 400;
    const GPS_TIMEOUT_MS = 5000;
    const AVG_STEP_LENGTH = 0.75; // Ù…ØªØ±

    const distanceEl = document.getElementById('distance');
    const stepsEl = document.getElementById('steps');
    const latEl = document.getElementById('lat');
    const lngEl = document.getElementById('lng');
    const modeEl = document.getElementById('mode');
    const statusEl = document.getElementById('status');
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');

    function handleMotion(event) {
      if (!isTracking) return;
      const acc = event.accelerationIncludingGravity;
      if (!acc) return;

      const now = Date.now();
      const accel = Math.sqrt(acc.x**2 + acc.y**2 + acc.z**2);
      const delta = Math.abs(accel - lastAccel);
      lastAccel = accel;

      if (delta > STEP_THRESHOLD && (now - lastStepTime) > MIN_STEP_INTERVAL) {
        stepCount++;
        stepsEl.textContent = stepCount;
        totalDistance += AVG_STEP_LENGTH;
        updateDistanceDisplay();
        lastStepTime = now;

        if (!isGpsAvailable || (now - lastGpsTime) > GPS_TIMEOUT_MS) {
          modeEl.textContent = 'ğŸš¶ ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§Ø®ÙÙ„ (PDR)';
          modeEl.style.color = '#ea580c';
          modeEl.style.background = '#ffedd5';
        }
      }
    }

    function updateGps() {
      if (!isTracking) return;
      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const { latitude, longitude, accuracy } = pos.coords;
          const now = Date.now();
          latEl.textContent = latitude.toFixed(7);
          lngEl.textContent = longitude.toFixed(7);
          lastGpsPosition = { lat: latitude, lng: longitude };
          lastGpsTime = now;
          isGpsAvailable = true;
          gpsTimeout = 0;
          modeEl.textContent = 'ğŸ›°ï¸ ÙˆØ¶Ø¹ Ø§Ù„Ø®Ø§Ø±ÙØ¬ (GPS + PDR)';
          modeEl.style.color = '#1d4ed8';
          modeEl.style.background = '#dbeafe';
          statusEl.textContent = `Ø¯Ù‚Ø© GPS: ${accuracy.toFixed(1)} Ù…`;
        },
        (error) => {
          isGpsAvailable = false;
          gpsTimeout += 2000;
          if (gpsTimeout > GPS_TIMEOUT_MS) {
            modeEl.textContent = 'ğŸš¶ ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§Ø®ÙÙ„ (PDR ÙÙ‚Ø·)';
            modeEl.style.color = '#ea580c';
            modeEl.style.background = '#ffedd5';
          }
        },
        { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
      );
    }

    function updateDistanceDisplay() {
      if (totalDistance >= 1000) {
        distanceEl.textContent = (totalDistance / 1000).toFixed(3) + ' ÙƒÙ…';
        document.getElementById('dashDistance').textContent = (totalDistance / 1000).toFixed(3) + ' ÙƒÙ…';
      } else {
        distanceEl.textContent = totalDistance.toFixed(1) + ' Ù…';
        document.getElementById('dashDistance').textContent = totalDistance.toFixed(1) + ' Ù…';
      }
      document.getElementById('dashSteps').textContent = stepCount;
    }

    function startWorkout() {
      if (!navigator.geolocation) {
        statusEl.textContent = 'âŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…';
        return;
      }
      if (typeof DeviceMotionEvent.requestPermission === 'function') {
        DeviceMotionEvent.requestPermission().then(permission => {
          if (permission === 'granted') initTracking();
          else statusEl.textContent = 'âŒ Ø±ÙÙØ¶ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø³';
        });
      } else {
        initTracking();
      }
    }

    function initTracking() {
      isTracking = true;
      totalDistance = 0;
      stepCount = 0;
      lastGpsPosition = null;
      isGpsAvailable = false;
      gpsTimeout = 0;

      distanceEl.textContent = '0.00 Ù…';
      stepsEl.textContent = '0';
      latEl.textContent = 'â€”';
      lngEl.textContent = 'â€”';
      modeEl.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙØ¹ÙŠÙ„...';
      statusEl.textContent = 'âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ù†Ø´Ø· â€” ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø¯Ø§Ø®Ù„ ÙˆØ§Ù„Ø®Ø§Ø±Ø¬';

      startBtn.disabled = true;
      stopBtn.disabled = false;

      window.addEventListener('devicemotion', handleMotion);
      updateGps();
      setInterval(updateGps, 2000);
    }

    function stopWorkout() {
      isTracking = false;
      window.removeEventListener('devicemotion', handleMotion);
      startBtn.disabled = false;
      stopBtn.disabled = true;

      // Ø­ÙØ¸ ÙÙŠ Firebase
      const finalDistanceKm = totalDistance / 1000;
      const calories = Math.round(finalDistanceKm * 60);
      db.collection('users').doc(currentUser.uid).collection('workouts').add({
        type: 'walking',
        distance: parseFloat(finalDistanceKm.toFixed(3)),
        calories,
        steps: stepCount,
        date: new Date().toISOString().split('T')[0],
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        statusEl.textContent = `â¹ï¸ ØªÙ… Ø§Ù„Ø­ÙØ¸: ${stepCount} Ø®Ø·ÙˆØ© | ${totalDistance >= 1000 ? (totalDistance/1000).toFixed(3) : totalDistance.toFixed(1)} ${totalDistance >= 1000 ? 'ÙƒÙ…' : 'Ù…'}`;
        loadDashboard();
      });
    }

    // Ø±Ø¨Ø· Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ…Ø±ÙŠÙ†
    startBtn.addEventListener('click', startWorkout);
    stopBtn.addEventListener('click', stopWorkout);

    // --- Ø§Ù„ØªØºØ°ÙŠØ© ---
    function saveNutrition() {
      const food = document.getElementById('foodItem').value.trim();
      const calories = parseFloat(document.getElementById('caloriesInput').value) || 0;
      const meal = document.getElementById('mealType').value;
      if (!food) return alert('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø·Ø¹Ø§Ù…');
      db.collection('users').doc(currentUser.uid).collection('nutrition').add({
        food, calories, meal, date: new Date().toISOString().split('T')[0]
      }).then(() => {
        loadNutritionList();
        document.getElementById('foodItem').value = '';
        document.getElementById('caloriesInput').value = '';
      });
    }

    function loadNutritionList() {
      const container = document.getElementById('nutritionList');
      container.innerHTML = '<p>Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>';
      const today = new Date().toISOString().split('T')[0];
      db.collection('users').doc(currentUser.uid).collection('nutrition')
        .where('date', '==', today)
        .get()
        .then(snapshot => {
          container.innerHTML = '<h4>Ø§Ù„ÙˆØ¬Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ…:</h4>';
          if (snapshot.empty) {
            container.innerHTML += '<p>Ù„Ù… ØªÙØ³Ø¬Ù‘Ù„ Ø£ÙŠ ÙˆØ¬Ø¨Ø§Øª.</p>';
          } else {
            snapshot.forEach(doc => {
              const n = doc.data();
              container.innerHTML += `<div style="padding:8px;border-bottom:1px solid #eee;">${n.food} (${n.meal}) - ${n.calories} Ø³Ø¹Ø±Ø©</div>`;
            });
          }
        });
    }

    // --- Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ ---
    function loadProfile() {
      if (currentUser) {
        document.getElementById('userInfo').textContent = currentUser.displayName || 'Ù…Ø³ØªØ®Ø¯Ù…';
      }
    }

    function loadDashboard() {
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
      document.getElementById('dashSteps').textContent = stepCount;
      document.getElementById('dashDistance').textContent = totalDistance >= 1000 
        ? (totalDistance / 1000).toFixed(3) + ' ÙƒÙ…' 
        : totalDistance.toFixed(1) + ' Ù…';
    }
  </script>
</body>
</html>
